#!/usr/bin/env bash
# Configure Nginx to include a custom HTTP header (X-Served-By) with the server's hostname

# Update packages and install Nginx
apt-get update -y
apt-get install -y nginx

# Insert custom header only if it's not already there
if ! grep -q "add_header X-Served-By" /etc/nginx/sites-available/default; then
    sed -i '/server_name _;/a \    add_header X-Served-By $hostname;' /etc/nginx/sites-available/default
fi

# Restart Nginx to apply changes
service nginx restart

